---
keywords: fastai
description: Juliaでカラフルに点滅するクリスマスツリーを描きます。
title: Juliaでカラフルに点滅するクリスマスツリーを描こう
toc: true 
badges: true
comments: true
categories: [JuliaLang, ネタ]
image: images/chart-preview.png
nb_path: _notebooks/christmas-tree.ipynb
layout: notebook
---

<!--
#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: _notebooks/christmas-tree.ipynb
-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>元ネタは特にないですが、Juliaでカラフルなクリスマスツリーを描きたいと思います、他の言語での実装お待ちしています！</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">S</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">☆ </span>
　　　  <span class="err">／＼</span> 
　　  <span class="err">／★∴</span>  <span class="err">＼</span>
　　 <span class="p">(</span><span class="n">人_人_人</span><span class="p">)</span>
　　<span class="err">／∴∵★∵★∵＼</span>
　 <span class="p">(</span><span class="n">_人_人_人_人</span><span class="p">)</span>
　 <span class="err">／☆∴∵∴∵★</span> <span class="err">∴＼</span>
　<span class="p">(</span><span class="n">_人</span><span class="err">★</span><span class="n">人</span><span class="err">☆</span><span class="n">人_</span> <span class="n">人_</span><span class="p">)</span>
　　　  <span class="err">￣</span><span class="n">凵</span><span class="err">￣</span> <span class="s2">&quot;;</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}
とりあえずこのツリーをカラフルに点滅させます。
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="printstyled">printstyled<a class="anchor-link" href="#printstyled"> </a></h3><p>printstyledは、いい感じに見た目を整えて出力できる関数です。試してみます。</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">printstyled</span><span class="p">(</span><span class="s2">&quot;GReeeeN&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="p">:</span><span class="n">green</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre><span class="ansi-green-fg">GReeeeN</span></pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}
今回は, 照明部分はランダムな色に、葉は緑、幹は赤色にしてみます
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">function</span> <span class="n">show_tree</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">S</span>
        <span class="k">if</span> <span class="n">s</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;∴&#39;</span><span class="p">,</span> <span class="s1">&#39;☆&#39;</span><span class="p">,</span> <span class="s1">&#39;∵&#39;</span><span class="p">,</span> <span class="s1">&#39;★&#39;</span><span class="p">,</span> <span class="s1">&#39;☆&#39;</span><span class="p">)</span>
            <span class="n">printstyled</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">rand</span><span class="p">(</span><span class="mi">1</span><span class="p">:</span><span class="mi">255</span><span class="p">))</span>
        <span class="n">elseif</span> <span class="n">s</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;￣&#39;</span><span class="p">,</span> <span class="s1">&#39;凵&#39;</span><span class="p">,</span> <span class="s1">&#39;￣&#39;</span><span class="p">)</span> 
            <span class="n">printstyled</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="p">:</span><span class="n">red</span><span class="p">)</span>
        <span class="k">else</span>
            <span class="n">printstyled</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="p">:</span><span class="n">light_green</span><span class="p">)</span>
        <span class="n">end</span>
    <span class="n">end</span>
<span class="n">end</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>show_tree (generic function with 1 method)</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">show_tree</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre><span class="ansi-green-intense-fg">	</span><span style="color: rgb(0,215,175)">☆</span><span class="ansi-green-intense-fg"> </span>
<span class="ansi-green-intense-fg">　</span><span class="ansi-green-intense-fg">　</span><span class="ansi-green-intense-fg">　</span><span class="ansi-green-intense-fg"> </span><span class="ansi-green-intense-fg"> </span><span class="ansi-green-intense-fg">／</span><span class="ansi-green-intense-fg">＼</span><span class="ansi-green-intense-fg"> </span>
<span class="ansi-green-intense-fg">　</span><span class="ansi-green-intense-fg">　</span><span class="ansi-green-intense-fg"> </span><span class="ansi-green-intense-fg"> </span><span class="ansi-green-intense-fg">／</span><span style="color: rgb(95,255,0)">★</span><span style="color: rgb(0,175,0)">∴</span><span class="ansi-green-intense-fg"> </span><span class="ansi-green-intense-fg"> </span><span class="ansi-green-intense-fg">＼</span>
<span class="ansi-green-intense-fg">　</span><span class="ansi-green-intense-fg">　</span><span class="ansi-green-intense-fg"> </span><span class="ansi-green-intense-fg">(</span><span class="ansi-green-intense-fg">人</span><span class="ansi-green-intense-fg">_</span><span class="ansi-green-intense-fg">人</span><span class="ansi-green-intense-fg">_</span><span class="ansi-green-intense-fg">人</span><span class="ansi-green-intense-fg">)</span>
<span class="ansi-green-intense-fg">　</span><span class="ansi-green-intense-fg">　</span><span class="ansi-green-intense-fg">／</span><span style="color: rgb(215,175,0)">∴</span><span style="color: rgb(175,0,255)">∵</span><span style="color: rgb(135,175,175)">★</span><span style="color: rgb(135,95,135)">∵</span><span style="color: rgb(215,135,215)">★</span><span style="color: rgb(215,135,255)">∵</span><span class="ansi-green-intense-fg">＼</span>
<span class="ansi-green-intense-fg">　</span><span class="ansi-green-intense-fg"> </span><span class="ansi-green-intense-fg">(</span><span class="ansi-green-intense-fg">_</span><span class="ansi-green-intense-fg">人</span><span class="ansi-green-intense-fg">_</span><span class="ansi-green-intense-fg">人</span><span class="ansi-green-intense-fg">_</span><span class="ansi-green-intense-fg">人</span><span class="ansi-green-intense-fg">_</span><span class="ansi-green-intense-fg">人</span><span class="ansi-green-intense-fg">)</span>
<span class="ansi-green-intense-fg">　</span><span class="ansi-green-intense-fg"> </span><span class="ansi-green-intense-fg">／</span><span style="color: rgb(95,175,135)">☆</span><span style="color: rgb(135,135,215)">∴</span><span style="color: rgb(215,255,255)">∵</span><span style="color: rgb(0,135,255)">∴</span><span style="color: rgb(168,168,168)">∵</span><span style="color: rgb(95,215,135)">★</span><span class="ansi-green-intense-fg"> </span><span style="color: rgb(178,178,178)">∴</span><span class="ansi-green-intense-fg">＼</span>
<span class="ansi-green-intense-fg">　</span><span class="ansi-green-intense-fg">(</span><span class="ansi-green-intense-fg">_</span><span class="ansi-green-intense-fg">人</span><span style="color: rgb(135,135,95)">★</span><span class="ansi-green-intense-fg">人</span><span style="color: rgb(135,175,0)">☆</span><span class="ansi-green-intense-fg">人</span><span class="ansi-green-intense-fg">_</span><span class="ansi-green-intense-fg"> </span><span class="ansi-green-intense-fg">人</span><span class="ansi-green-intense-fg">_</span><span class="ansi-green-intense-fg">)</span>
<span class="ansi-green-intense-fg">　</span><span class="ansi-green-intense-fg">　</span><span class="ansi-green-intense-fg">　</span><span class="ansi-green-intense-fg"> </span><span class="ansi-green-intense-fg"> </span><span class="ansi-red-fg">￣</span><span class="ansi-red-fg">凵</span><span class="ansi-red-fg">￣</span><span class="ansi-green-intense-fg"> </span></pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}
さて, 点滅させるには出力を更新し続ける必要があります。
今回は出力を丸ごと消去して再度描画することで更新します。(カス実装の自覚はあるので誰かなんとかしてください)
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">function</span> <span class="n">clean</span><span class="p">(</span><span class="n">H</span><span class="p">)</span>
    <span class="n">buf</span> <span class="o">=</span> <span class="n">IOBuffer</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="mi">1</span><span class="p">:</span><span class="n">H</span><span class="o">+</span><span class="mi">1</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\x1b</span><span class="s2">[2K&quot;</span><span class="p">)</span> <span class="c1"># clear line</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\x1b</span><span class="s2">[999D</span><span class="se">\x1b</span><span class="s2">[$(1)A&quot;</span><span class="p">)</span> <span class="c1"># rollback</span>
    <span class="n">end</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">buf</span> <span class="o">|&gt;</span> <span class="n">take</span><span class="o">!</span> <span class="p">|</span>&gt; String<span class="o">)</span>
<span class="n">end</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>clean (generic function with 1 method)</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>この <code>clean(H)</code> で出力をH行戻すことができます。
このコードはごまふさん(<a href="https://twitter.com/MathSorcerer">https://twitter.com/MathSorcerer</a>)
の物を拝借しました。ありがとうございます。</p>
<p>さて、あとはいい感じにループさせるだけです。</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">H</span> <span class="o">=</span> <span class="mi">7</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="mi">1</span><span class="p">:</span><span class="mi">100</span>
    <span class="n">show_tree</span><span class="p">()</span>
    <span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
    <span class="n">clean</span><span class="p">(</span><span class="n">H</span><span class="p">)</span>
<span class="n">end</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}
結果はぜひみなさんのREPLで試してみてください！
</div>
 

<script type="application/vnd.jupyter.widget-state+json">
{"state": {}, "version_major": 2, "version_minor": 0}
</script>

